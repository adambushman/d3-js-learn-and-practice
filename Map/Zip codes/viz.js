
d3.json("https://raw.githubusercontent.com/OpenDataDE/State-zip-code-GeoJSON/master/ut_utah_zip_codes_geo.min.json", data => {
    // console.log(data.features);

    // Filtering for Wasatch Front Zips
    let my_zips = ['84003', '84004', '84005', '84006', '84009', '84010', '84011', '84013', '84014', '84015', '84016', '84017', '84020', '84022', '84024', '84025', '84029', '84033', '84034', '84036', '84037', '84040', '84041', '84042', '84043', '84044', '84045', '84047', '84054', '84055', '84056', '84057', '84058', '84059', '84060', '84061', '84062', '84065', '84067', '84068', '84069', '84070', '84071', '84074', '84075', '84080', '84081', '84083', '84084', '84087', '84088', '84089', '84090', '84091', '84092', '84093', '84094', '84095', '84096', '84097', '84098', '84101', '84102', '84103', '84104', '84105', '84106', '84107', '84108', '84109', '84110', '84111', '84112', '84113', '84114', '84115', '84116', '84117', '84118', '84119', '84120', '84121', '84122', '84123', '84124', '84125', '84126', '84127', '84128', '84129', '84130', '84131', '84132', '84133', '84134', '84136', '84138', '84139', '84141', '84143', '84144', '84145', '84147', '84148', '84150', '84151', '84152', '84157', '84158', '84165', '84170', '84171', '84180', '84184', '84189', '84190', '84199', '84201', '84244', '84310', '84315', '84317', '84401', '84402', '84403', '84404', '84405', '84407', '84408', '84409', '84412', '84414', '84415', '84601', '84602', '84603', '84604', '84605', '84606', '84626', '84633', '84651', '84653', '84655', '84660', '84663', '84664'];

    data = data.features.filter(d => {
        return my_zips.includes(d.properties.ZCTA5CE10)
    })

    console.log(data)

    let width = 1000
    let height = 700

    // Map projection

    var path = d3.geoPath();
    var projection = d3.geoAlbers()
        .scale(width*15)
        .center([-16, 40.75])
        .translate([width / 2, height / 2]);

    svg = d3.select("#canvas")
        .append("svg")
        .attr("width", width)
        .attr("height", height);

    let davis_zips = ['84015', '84041', '84010', '84037', '84403', '84405', '84103', '84075', '84040', '84087', '84025', '84054', '84014', '84315', '84056', '84011', '84016', '84089']

    svg.append("g")
        .selectAll("path")
        .data(data)
        .enter()
            .append("path")
            .attr("d", d3.geoPath()
                .projection(projection)
            )
            .attr("fill", (d) => { 
                return (davis_zips.includes(d.properties.ZCTA5CE10)) ? '#ac192d' : '#ebeaeb'
             })
             .attr("stroke", (d) => { 
                return (davis_zips.includes(d.properties.ZCTA5CE10)) ? '#ebeaeb' : '#ac192d'
             })
            .attr("stroke-width", 0.5);

})